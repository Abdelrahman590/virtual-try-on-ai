# Virtual Try-On AI - Complete Setup Guide
# Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØ§Ù…Ù„ - ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©

## ğŸ“‹ Project Overview

This is a complete **Virtual Try-On AI** system with:
- **Human Parsing**: SCHP model for clothes segmentation
- **Pose Estimation**: MediaPipe for 33 body keypoints
- **Body Measurements**: Automatic calculation of body dimensions
- **Batch Processing**: Process multiple images at once
- **Bilingual Support**: Arabic and English

---

## âœ… Complete File Structure Created

```
virtual-tryon/
â”‚
â”œâ”€â”€ Main Scripts (Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©):
â”‚   â”œâ”€â”€ setup.py                 â† Initial setup (Ø®Ø·ÙˆØ© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ÙˆÙ„Ù‰)
â”‚   â”œâ”€â”€ main.py                  â† Complete pipeline (Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„)
â”‚   â”œâ”€â”€ run_parsing.py           â† Human parsing (ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³)
â”‚   â”œâ”€â”€ run_pose.py              â† Pose estimation (ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ¶Ø¹)
â”‚   â”œâ”€â”€ batch_process.py         â† Batch processing (Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©)
â”‚   â””â”€â”€ verify_installation.py   â† Installation check (Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ«Ø¨ÙŠØª)
â”‚
â”œâ”€â”€ Configuration Files (Ù…Ù„ÙØ§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª):
â”‚   â”œâ”€â”€ requirements.txt          â† Python dependencies
â”‚   â”œâ”€â”€ README.md                 â† Full documentation
â”‚   â”œâ”€â”€ QUICKSTART.md             â† Quick start guide
â”‚   â””â”€â”€ SETUP_COMPLETE.txt        â† This file
â”‚
â”œâ”€â”€ Scripts Package (Ø­Ø²Ù…Ø© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª):
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ utils.py              â† Utility functions
â”‚   â”‚   â””â”€â”€ config.py             â† Configuration settings
â”‚   â””â”€â”€ scripts/__init__.py       â† Package init
â”‚
â”œâ”€â”€ Data Directories (Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª):
â”‚   â”œâ”€â”€ input/                    â† Input images (ØµÙˆØ± Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª)
â”‚   â”œâ”€â”€ output/                   â† Final results (Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©)
â”‚   â”œâ”€â”€ parsing/                  â† Parsing results (Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„)
â”‚   â”œâ”€â”€ pose/                     â† Pose results (Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ÙˆØ¶Ø¹)
â”‚   â”œâ”€â”€ masks/                    â† Segmentation masks (Ø§Ù„Ø£Ù‚Ù†Ø¹Ø©)
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ schp/                 â† SCHP model weights (Ø£ÙˆØ²Ø§Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬)
â”‚
â””â”€â”€ Documentation (Ø§Ù„ØªÙˆØ«ÙŠÙ‚):
    â”œâ”€â”€ README.md                 â† Full guide (Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„)
    â”œâ”€â”€ QUICKSTART.md             â† Quick start (Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹)
    â””â”€â”€ SETUP_COMPLETE.txt        â† Setup summary (Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯)
```

---

## ğŸ“¦ Created Files Summary

### 1. **Main Scripts** (6 files)

| File | Purpose | Ø§Ù„Ù‡Ø¯Ù |
|------|---------|--------|
| `setup.py` | Environment setup | Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª |
| `main.py` | Complete pipeline | ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„ |
| `run_parsing.py` | SCHP parsing | ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ |
| `run_pose.py` | Pose estimation | ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ¶Ø¹ |
| `batch_process.py` | Batch processing | Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¹Ø¯Ø© ØµÙˆØ± |
| `verify_installation.py` | Installation check | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ«Ø¨ÙŠØª |

### 2. **Utility Files** (2 files)

| File | Purpose | Ø§Ù„Ù‡Ø¯Ù |
|------|---------|--------|
| `scripts/utils.py` | Helper functions | Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© |
| `scripts/config.py` | Configuration | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ |

### 3. **Documentation** (3 files)

| File | Content | Ø§Ù„Ù…Ø­ØªÙˆÙ‰ |
|------|---------|--------|
| `README.md` | Complete guide | Ø´Ø±Ø­ Ø´Ø§Ù…Ù„ |
| `QUICKSTART.md` | Quick start | Ø¨Ø¯Ø¡ Ø³Ø±ÙŠØ¹ |
| `requirements.txt` | Dependencies | Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© |

---

## ğŸš€ Getting Started / Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹

### Step 1: Initial Setup (Ø§Ù„Ø®Ø·ÙˆØ© 1)

```bash
# Navigate to project
cd d:\virtual-tryon

# Run setup script (this will take 10-20 minutes)
python setup.py
```

**What setup.py does:**
- âœ“ Creates all required folders
- âœ“ Creates Python 3.8 virtual environment
- âœ“ Installs all dependencies (torch, mediapipe, opencv, etc.)
- âœ“ Downloads SCHP model (lip_final.pth)
- âœ“ Clones SCHP repository from GitHub

### Step 2: Prepare Input Image (Ø§Ù„Ø®Ø·ÙˆØ© 2)

```bash
# Copy your image to input folder
copy "C:\path\to\your\image.jpg" "input\test.jpg"
```

**Requirements:**
- Full-body person in image
- Clear and well-lit
- JPEG or PNG format
- Recommended size: 500x500+ pixels

### Step 3: Run Pipeline (Ø§Ù„Ø®Ø·ÙˆØ© 3)

```bash
# Run complete pipeline
python main.py

# Or run individual scripts
python run_parsing.py  # Parsing only
python run_pose.py     # Pose only
```

---

## ğŸ“Š Output Files Generated

### After Parsing (Ø¨Ø¹Ø¯ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³)
```
parsing/
â”œâ”€â”€ test_visual.png          â† Colored segmentation
â”œâ”€â”€ test_labels.npy          â† Parsing labels array
â””â”€â”€ test_overlay.png         â† Overlay image

masks/
â”œâ”€â”€ body_mask.png            â† Body segmentation
â”œâ”€â”€ cloth_mask.png           â† Clothing segmentation
â”œâ”€â”€ skin_mask.png            â† Skin segmentation
â””â”€â”€ background_mask.png      â† Background mask
```

### After Pose Estimation (Ø¨Ø¹Ø¯ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ¶Ø¹)
```
pose/
â”œâ”€â”€ keypoints.json           â† 33 body landmarks
â”œâ”€â”€ body_measure.json        â† Body measurements
â””â”€â”€ skeleton.png             â† Skeleton visualization
```

---

## ğŸ”§ Installation Requirements

### System Requirements
- **OS**: Windows 10+ / Linux / macOS
- **RAM**: 4GB+ (8GB+ recommended)
- **Disk Space**: 2GB+ for models
- **GPU**: Optional (CUDA 11.8 for RTX 3050Ti)

### Software Requirements
- **Python**: 3.8 or higher
- **Git**: For cloning repositories
- **pip**: Python package manager

### Internet
- Required for initial setup and model downloads
- ~1.5GB for model files

---

## ğŸ¯ Key Features

### 1. **Human Parsing** (ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³)
- SCHP model-based segmentation
- 20 clothing/body classes
- Multiple masks:
  - Body mask
  - Cloth mask
  - Skin mask
  - Background mask

### 2. **Pose Estimation** (ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ¶Ø¹)
- MediaPipe 33 landmarks
- Real-time processing
- Joint confidence scores
- Skeleton visualization

### 3. **Body Measurements** (Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¬Ø³Ù…)
- Shoulder width
- Hip width
- Chest width
- Body height
- Arm length
- Leg length

### 4. **Batch Processing** (Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©)
- Process multiple images
- Automatic report generation
- Results organization

---

## ğŸ“š File Descriptions

### setup.py
**Purpose**: Initial environment setup

**Features:**
- Creates virtual environment
- Installs dependencies
- Downloads SCHP model
- Clones SCHP repository
- Provides progress messages
- Error handling

**Usage:**
```bash
python setup.py
```

### run_parsing.py
**Purpose**: Human parsing using SCHP model

**Features:**
- Loads SCHP model
- Processes input image
- Generates segmentation masks
- Creates colored visualization
- Saves results to parsing/ and masks/

**Output:**
- Parsing visualization
- Label arrays (NumPy)
- Segmentation masks (PNG)

### run_pose.py
**Purpose**: Pose estimation using MediaPipe

**Features:**
- Detects 33 body landmarks
- Calculates body measurements
- Draws skeleton visualization
- Exports keypoints (JSON)
- Saves measurements (JSON)

**Output:**
- Keypoints JSON
- Body measurements JSON
- Skeleton image

### main.py
**Purpose**: Complete pipeline orchestration

**Features:**
- Runs parsing + pose estimation
- Manages pipeline execution
- Error handling
- Results summary
- Command-line arguments

**Usage:**
```bash
python main.py
python main.py --skip-parsing
python main.py --image custom_image.jpg
```

### batch_process.py
**Purpose**: Process multiple images

**Features:**
- Find images in directory
- Batch processing
- Automatic report generation
- Results organization
- Success rate tracking

**Usage:**
```bash
python batch_process.py --input-dir input --output-dir output
python batch_process.py --recursive --pattern "*.jpg"
```

### verify_installation.py
**Purpose**: Check installation status

**Features:**
- Python version check
- Package verification
- Folder structure check
- Script availability check
- CUDA support check
- Model files verification

**Usage:**
```bash
python verify_installation.py
```

### scripts/utils.py
**Purpose**: Utility functions

**Contains:**
- Image processing functions
- Mask operations
- Bounding box calculations
- Contrast enhancement
- ImageProcessor class

### scripts/config.py
**Purpose**: Project configuration

**Contains:**
- Path definitions
- Model settings
- Image parameters
- Parsing classes
- Landmark definitions
- Device configuration

---

## ğŸ”‘ Key Classes and Functions

### In run_parsing.py
```python
load_image()              # Load input image
simple_parsing()          # Perform parsing
create_masks_from_labels() # Create segmentation masks
visualize_parsing()       # Create colored visualization
save_parsing_results()    # Save all results
```

### In run_pose.py
```python
detect_pose()            # Detect pose landmarks
extract_keypoints()      # Extract landmark coordinates
calculate_distance()     # Calculate distance between landmarks
calculate_body_measurements() # Calculate body dimensions
draw_skeleton()          # Create skeleton visualization
```

### In scripts/utils.py
```python
resize_image()           # Resize with aspect ratio
apply_mask()             # Apply mask overlay
get_bounding_box()       # Get mask boundaries
enhance_contrast()       # Improve image contrast
ImageProcessor           # Utility class
```

---

## ğŸ“Š SCHP Model Information

### Model Name
**SCHP** = Self-Correction Human Parsing

### Classes (20 total)
- Background (class 0)
- Hat, Hair, Sunglasses (1-3)
- Clothes: Upper, Skirt, Pants, Dress, Belt (4-8)
- Shoes (9-10)
- Face, Legs, Arms (11-15)
- Bag, Scarf (16-17)
- Skin: Torso, Neck (18-19)

### Model File
- **Name**: lip_final.pth
- **Size**: ~400MB
- **Source**: Google Drive
- **Downloaded to**: models/schp/lip_final.pth

---

## ğŸ® MediaPipe Landmarks (33 total)

### Head (8 landmarks)
0: Nose, 1-3: Left eye, 4-6: Right eye, 7-8: Ears

### Arms/Hands (12 landmarks)
11-12: Shoulders, 13-16: Left arm, 14-16: Right arm

### Legs (8 landmarks)
23-24: Hips, 25-26: Knees, 27-28: Ankles

### Feet (5 landmarks)
29-30: Heels, 31-32: Foot indices

---

## ğŸ’¾ Package Dependencies

| Package | Version | Purpose |
|---------|---------|---------|
| torch | 1.13.1+cu118 | Deep learning |
| torchvision | 0.14.1+cu118 | Vision models |
| opencv-python | 4.8.0.74 | Image processing |
| mediapipe | 0.10.0 | Pose estimation |
| pillow | 10.0.0 | Image operations |
| numpy | 1.24.3 | Numerical computing |
| gdown | 4.7.1 | Google Drive download |
| scipy | 1.11.2 | Scientific computing |

---

## ğŸ”„ Processing Flow

```
Input Image
    â†“
Parsing (run_parsing.py)
    â”œâ”€ Load SCHP model
    â”œâ”€ Analyze image
    â”œâ”€ Generate masks
    â””â”€ Save results
    â†“
Pose Estimation (run_pose.py)
    â”œâ”€ Detect landmarks
    â”œâ”€ Extract keypoints
    â”œâ”€ Calculate measurements
    â””â”€ Save results
    â†“
Output Files
    â”œâ”€ parsing/ (segmentation)
    â”œâ”€ masks/ (body parts)
    â”œâ”€ pose/ (keypoints & measurements)
    â””â”€ Summary report
```

---

## ğŸ› Troubleshooting

### Issue: Module not found
**Solution:**
```bash
pip install -r requirements.txt
```

### Issue: CUDA errors
**Solution:**
```bash
pip install torch==1.13.1 torchvision==0.14.1  # CPU version
```

### Issue: Model download fails
**Solution:**
Download manually: https://drive.google.com/file/d/1LBvbjRgGc0wJdvO65_ZVgnj0iB3pHMKqN/view

### Issue: No person detected
**Solution:**
Use clearer image with full body visible

---

## ğŸ“ Configuration Files

### requirements.txt
Lists all Python dependencies with versions

### scripts/config.py
Contains all project settings:
- Path definitions
- Model parameters
- Processing settings
- Class definitions
- Measurement units

---

## ğŸš€ Advanced Usage

### Custom image path
```bash
python main.py --image path/to/image.jpg
```

### Skip parsing step
```bash
python main.py --skip-parsing
```

### Skip pose step
```bash
python main.py --skip-pose
```

### Batch processing
```bash
python batch_process.py --input-dir images/ --output-dir results/
```

### Recursive search
```bash
python batch_process.py --recursive --pattern "*.jpg"
```

---

## ğŸ“ Support Resources

1. **README.md**: Complete documentation with examples
2. **QUICKSTART.md**: Quick start guide
3. **verify_installation.py**: Check installation status
4. **scripts/utils.py**: Utility functions documentation
5. **scripts/config.py**: Configuration reference

---

## âœ¨ Features Summary

âœ“ Complete setup automation
âœ“ Human parsing with SCHP
âœ“ Pose estimation with MediaPipe
âœ“ Automatic body measurements
âœ“ Batch processing support
âœ“ Multiple output formats
âœ“ Comprehensive error handling
âœ“ Bilingual support (Arabic/English)
âœ“ GPU acceleration support
âœ“ Detailed documentation

---

## ğŸ“… Version Information

**Version**: 1.0
**Release Date**: 2025-11-29
**Status**: Complete and Ready for Use

---

## ğŸ“ Next Steps

1. **Verify Installation**:
   ```bash
   python verify_installation.py
   ```

2. **Test with Sample Image**:
   ```bash
   # Place image at input/test.jpg
   python main.py
   ```

3. **Check Results**:
   - View output in parsing/, masks/, pose/ folders
   - Review generated JSON files
   - Check body measurements

4. **Batch Processing** (optional):
   ```bash
   python batch_process.py --input-dir input --output-dir output
   ```

---

**All files created successfully!**
**The Virtual Try-On AI project is ready to use.**

ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ù†Ø¬Ø§Ø­!
Ù…Ø´Ø±ÙˆØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù….

---

For detailed information, see **README.md**
Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§ØªØŒ Ø§Ù†Ø¸Ø± **README.md**
